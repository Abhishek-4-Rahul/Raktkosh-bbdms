<!DOCTYPE html>
<html>
<head>
  <title></title>
  <style >
    
    * {
    margin: 0;
    padding: 0;
    background: none;
    border: 0;
    border-radius: 0;
    outline: 0;
    box-sizing: border-box;
    color: inherit;
    font: inherit;
    line-height: inherit;
    user-select: none;
    cursor: default;
}

body {
    margin: 0 auto;
    padding: 20px;
    width: 100%;
    min-width: 440px;
    max-width: 740px;
    background: #e5e5e5;
    color: #000;
    font: 300 14px/20px 'Helvetica Neue', sans-serif;
}

ul {
    padding-left: 80px;
    list-style: none;
}

ul li {
    background: #fff;
    border-radius: 2px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    position: relative;
}

ul li:not(:first-child) {
    margin-top: 20px;
}

ul li:before {
    content: '';
    border-width: 10px 10px 10px 0;
    border-style: solid;
    border-color: transparent #fff;
    position: absolute;
    top: 10px;
    left: -10px;
}

ul li header {
    border-bottom: 1px solid #e5e5e5;
    font-size: 0;
}

ul li header h1 {
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 500;
    display: inline-block;
}

ul li header h1 a {
    text-decoration: none;
    cursor: pointer;
}

ul li header h1.author {
    color: #9a3;
}

ul li header h1.author:after {
    content: 'Author';
    margin-left: 10px;
    padding: 0 4px;
    background: #9a3;
    border-radius: 2px;
    color: #fff;
    font-size: 10px;
    font-weight: normal;
    text-transform: uppercase;
    position: absolute;
}

ul li header h1.author a {
    color: #9a3;
}

ul li header img {
    width: 60px;
    height: 60px;
    background: #fff;
    border: 4px solid #fff;
    border-radius: 2px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    position: absolute;
    top: 0;
    left: -80px;
}

ul li header div {
    height: 40px;
    float: right;
}

ul li header div button {
    width: 40px;
    height: 40px;
    background: url(data:image/png;base64,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) no-repeat;
    background-size: 120px 80px;
    cursor: pointer;
}

ul li header div button:nth-child(1) {
    background-position: 0 0;
}

ul li header div button:nth-child(1).loved {
    background-position: -80px 0;
}

ul li header div button:nth-child(2) {
    background-position: 0 -40px;
}

ul li header div button:hover:nth-child(1) {
    background-position: -40px 0;
}

ul li header div button:hover:nth-child(1).loved {
    background-position: -80px 0;
}

ul li header div button:hover:nth-child(2) {
    background-position: -40px -40px;
}

ul li p {
    padding: 20px;
    white-space: pre-line;
    overflow-x: hidden;
}

ul li p .reply {
    color: #9a3;
}

ul li p a {
    text-decoration: underline;
    cursor: pointer;
}

ul li p a:hover {
    text-decoration: none;
}

form {
    margin-top: 20px;
    padding: 20px 20px 20px 100px;
    background: #fff;
    border-radius: 2px;
    font-size: 0;
    position: relative;
}

form:before {
    content: '';
    border-width: 10px 10px 10px 0;
    border-style: solid;
    border-color: transparent rgba(229, 229, 229, 0.5);
    position: absolute;
    top: 30px;
    left: 90px;
}

form input, form textarea {
    padding: 10px 20px;
    width: 100%;
    background: rgba(229, 229, 229, 0.5) no-repeat;
    font-size: 14px;
    user-select: text;
    display: block;
    cursor: text;
}

form input:not(:first-child), form textarea:not(:first-child) {
    margin-top: 2px;
}

form input[placeholder='Email'], form input[placeholder='Website'], form textarea[placeholder='Email'], form textarea[placeholder='Website'] {
    width: 50%;
    display: inline-block;
}

form input[placeholder='Email'], form textarea[placeholder='Email'] {
    border-right: 1px solid #fff;
}

form input[placeholder='Website'], form textarea[placeholder='Website'] {
    border-left: 1px solid #fff;
}

form input::-webkit-input-placeholder, form textarea::-webkit-input-placeholder {
    color: #666;
}

form input::-moz-placeholder, form textarea::-moz-placeholder {
    color: #666;
}

form input:-moz-placeholder, form textarea:-moz-placeholder {
    color: #666;
}

form input:-ms-input-placeholder, form textarea:-ms-input-placeholder {
    color: #666;
}

form textarea {
    margin-top: 1px;
    padding: 20px;
    height: 120px;
    resize: none;
}

form img {
    width: 60px;
    height: 60px;
    background: rgba(229, 229, 229, 0.5);
    border: 4px solid rgba(229, 229, 229, 0.5);
    border-radius: 2px;
    position: absolute;
    top: 20px;
    left: 20px;
}

form button {
    margin: 10px 10px 0 auto;
    padding: 10px 0;
    width: 200px;
    background: #9a3;
    border-radius: 2px;
    color: #fff;
    font-size: 14px;
    display: block;
    cursor: pointer;
}

  </style>
</head>
<body>
  <script >
(function() {
  angular.module('comments', []).controller('commentsCtrl', function($scope, $sce) {
    var postAuthorEmail;
    postAuthorEmail = 'jan.kanty.pawelski@gmail.com';
    $scope.comments = [
      {
        id: 1,
        author: {
          name: 'Jan-Kanty Pawelski',
          email: 'jan.kanty.pawelski@gmail.com',
          website: 'pawelski.io'
        },
        content: 'I made it! My awesome angular comment system. What do you think?',
        loved: false
      }, {
        id: 2,
        author: {
          name: 'Tomasz Jakut',
          email: 'comandeer@comandeer.pl',
          website: 'comandeer.pl'
        },
        content: 'Nice looking. Good job dude ;)',
        loved: true
      }, {
        id: 3,
        author: {
          name: 'Jan-Kanty Pawelski',
          email: 'jan.kanty.pawelski@gmail.com',
          website: 'pawelski.io'
        },
        content: '<span class="reply">@Tomasz Jakut</span> Thanks man. I tried hard.',
        loved: false
      }, {
        id: 4,
        author: {
          name: 'Grzegorz Bąk',
          email: 'szary.elf@gmail.com',
          website: 'gregbal.com'
        },
        content: 'Third! Amazing system man! By the way check my new website: <a href="//gregbak.com">http://gregbak.com</a>.',
        loved: false
      }
    ];
    $scope.newComment = {
      id: '',
      author: {
        name: '',
        email: '',
        website: ''
      },
      content: '',
      loved: ''
    };
    $scope.parseContent = function(content) {
      return $sce.trustAsHtml(content);
    };
    $scope.isAuthor = function(email) {
      return email === postAuthorEmail;
    };
    $scope.getGravatar = function(email) {
      var hash;
      if (email === void 0) {
        email = '';
      }
      hash = email.trim();
      hash = hash.toLowerCase();
      hash = md5(hash);
      return '//gravatar.com/avatar/' + hash + '?s=60&d=identicon';
    };
    $scope.love = function(commentId) {
      var comment, _i, _len, _ref, _results;
      _ref = $scope.comments;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        comment = _ref[_i];
        if (comment.id === commentId) {
          _results.push(comment.loved = !comment.loved);
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };
    $scope.reply = function(author) {
      if ($scope.newComment.content === void 0) {
        $scope.newComment.content = '';
      }
      if ($scope.newComment.content.search('@' + author + '@') === -1) {
        if ($scope.newComment.content[0] === '@') {
          $scope.newComment.content = ', ' + $scope.newComment.content;
        } else {
          $scope.newComment.content = ' ' + $scope.newComment.content;
        }
        return $scope.newComment.content = '@' + author + '@' + $scope.newComment.content;
      }
    };
    $scope.addNewComment = function() {
      var notEmpty;
      notEmpty = {
        name: $scope.newComment.author.name.length > 0,
        email: $scope.newComment.author.email.length > 0,
        content: $scope.newComment.content.length > 0
      };
      if (notEmpty.name && notEmpty.email && notEmpty.content) {
        $scope.newComment.id = $scope.comments.length + 1;
        $scope.newComment.author.website = $scope.newComment.author.website.replace(/https?:\/\/(www.)?/, '');
        $scope.newComment.content = $scope.newComment.content.replace(/(@[^@.]+)@/, '<span class="reply">$1</span>');
        $scope.newComment.content = $scope.newComment.content.replace(/https?:\/\/(www.)?([a-zA-Z0-9\-_]+\.[a-zA-Z0-9]+)/, '<a href="//$2">$2</a>');
        $scope.newComment.loved = false;
        $scope.comments.push($scope.newComment);
        return $scope.newComment = {};
      }
    };
    return $scope.$watch('newComment.email', function(newValue, oldValue) {
      var newCommentAvatar;
      newCommentAvatar = document.getElementById('newCommentAvatar');
      return newCommentAvatar.src = $scope.getGravatar($scope.newComment.email);
    });
  });

}).call(this);
</script>


<div ng-app="comments" ng-controller="commentsCtrl">
  <ul>
    <li ng-repeat="comment in comments">
      <header>
        <h1 ng-if="comment.author.website.length == 0" ng-class="{ author: isAuthor(comment.author.email) }">{{ comment.author.name }}</h1>
        <h1 ng-if="comment.author.website.length > 0" ng-class="{ author: isAuthor(comment.author.email) }"><a ng-href="//{{ comment.author.website }}">{{ comment.author.name }}</a></h1>
        <img ng-src="{{ getGravatar(comment.author.email) }}">
        <div>
          <button ng-click="love(comment.id)" ng-class="{ loved: comment.loved }"></button>
          <button ng-click="reply(comment.author.name)"></button>
        </div>
      </header>
      <p ng-bind-html="parseContent(comment.content)"></p>
    </li>
  </ul>
  <form name="form" ng-submit="addNewComment()" novalidate>
    <input placeholder="First and second name" type="text" ng-model="newComment.author.name" required>
    <textarea placeholder="Comment" ng-model="newComment.content" required></textarea>
    <input type="text" placeholder="Email" ng-pattern="/^.+@.+\.[a-z]+$/" ng-model="newComment.author.email" required>
    <input type="text" placeholder="Website" ng-pattern="/^.+\.[a-z]+$/" ng-model="newComment.author.website">
    <img id="newCommentAvatar" ng-src="{{ getGravatar(newComment.author.email) }}">
    <button type="submit">Add comment</button>
  </form>
</div>
</body>
</html>




